<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>íƒ€ë¡œì¹´ë“œ ë¯¸ë‹ˆê²Œì„</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to bottom, #fff1f9, #ffe6f0);
      padding: 1rem;
      text-align: center;
    }
    h1 {
      color: #cc338b;
    }
    .card-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
    }
    .popup-entry-wrapper {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 1rem;
    }
    .popup-entry {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 120px;
    }
    .popup-card-text {
      font-size: 0.85rem;
      margin-top: 0.5rem;
      text-align: center;
      background: rgba(255,255,255,0.7);
      padding: 0.3rem 0.5rem;
      border-radius: 8px;
      color: #444;
    }
    .result-card {
      width: 100px;
      height: 150px;
      background-color: white;
      border: 2px solid #ff99cc;
      border-radius: 16px;
      box-shadow: 0 0 12px rgba(255, 153, 204, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.95rem;
      cursor: pointer;
      flex-basis: calc(20% - 1rem);
    }
    .summary-text {
      margin-top: 2rem;
      background: rgba(255,255,255,0.8);
      border-radius: 12px;
      padding: 1rem;
      color: #333;
      font-weight: bold;
      font-size: 0.9rem;
      text-align: center;
    }
    #overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 999;
    }
    #popup {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 0 16px rgba(0,0,0,0.3);
    }
    button {
      margin-top: 2rem;
      padding: 0.8rem 1.2rem;
      background: #ff99cc;
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>ğŸ”® 3ì¥ íƒ€ë¡œì¹´ë“œ ë¯¸ë‹ˆê²Œì„ ğŸ”®</h1>
  <div id="card-container" class="card-container"></div>
  <button onclick="resetGame()">ë‹¤ì‹œ ë½‘ê¸°</button>

  <div id="overlay">
    <div id="popup">
      <h2>ğŸ”® ë‹¹ì‹ ì˜ íƒ€ë¡œ ê²°ê³¼</h2>
      <div id="popup-content"></div>
      <button onclick="closePopup()">ë‹«ê¸°</button>
    </div>
  </div>

  <script>
    const tarotDeck = [
      "The Fool", "The Magician", "The High Priestess", "The Empress", "The Emperor",
      "The Hierophant", "The Lovers", "The Chariot", "Strength", "The Hermit",
      "Wheel of Fortune", "Justice", "The Hanged Man", "Death", "Temperance",
      "The Devil", "The Tower", "The Star", "The Moon", "The Sun",
      "Judgement", "The World"
    ];

const contextualInterpretations = {
  "The Fool_ê³¼ê±°": "íë¹… ì‹œì ˆ, ëª…í˜¸ë¥¼ ì²˜ìŒ ë³´ê³  ìš°ì£¼ê°€ ì—´ë¦° ë“¯í•œ ì¶©ê²©ì„ ë°›ì•˜ë˜ ë•Œì˜ˆìš”.",
  "The Fool_í˜„ì¬": "ì§€ê¸ˆì€ ì…ë• ë¶€ì •ê¸°ë¥¼ ì§€ë‚˜ ëª…í˜¸ì˜ ëˆˆë¹› í•˜ë‚˜ì—ë„ ë§ˆìŒì´ ì¶œë ì´ëŠ” ì‹œê¸°ì˜ˆìš”.",
  "The Fool_ë¯¸ë˜": "ëª…í˜¸ì™€ì˜ ì¸ì—°ì€ ì˜ˆê¸°ì¹˜ ëª»í•œ ë°©í–¥ìœ¼ë¡œ ë‹¹ì‹ ì„ í–‰ë³µí•˜ê²Œ ë§Œë“¤ ê±°ì˜ˆìš”.",
  "The Magician_ê³¼ê±°": "ëª…í˜¸ê°€ í•œ ë¬´ëŒ€ì—ì„œ ì˜ê°ì„ ë°›ì•„ íŒ¬ì•„íŠ¸ë‚˜ ê¸€ë¡œ ê°ì •ì„ ìŸì•„ëƒˆë˜ ê¸°ì–µì´ ìˆì–´ìš”.",
  "The Magician_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ ë•ë¶„ì— ì¼ìƒì—ì„œë„ ì°½ì˜ë ¥ì´ ìƒ˜ì†ŸëŠ” ëŠë‚Œì´ì—ìš”.",
  "The Magician_ë¯¸ë˜": "ëª…í˜¸ë¥¼ í†µí•´ ìì‹ ë§Œì˜ íŒ¬í™œë™ ì„¸ê³„ê´€ì´ ë” ê¹Šì–´ì§ˆ ê±°ì˜ˆìš”.",
  "The High Priestess_ê³¼ê±°": "ëª…í˜¸ì—ê²Œ ì…ë•í•˜ê¸° ì „ ì²˜ìŒì—ëŠ” ì‰½ê²Œ ë‹¤ê°€ê°€ì§€ ëª»í–ˆë˜ ìˆœê°„ì´ ìˆì—ˆì–´ìš”.",
  "The High Priestess_í˜„ì¬": "ì§€ê¸ˆì€ ë§ ì—†ì´ë„ ëª…í˜¸ì˜ ì§„ì‹¬ì„ ëŠë¼ë©° ë¬µë¬µíˆ íŒ¬ì‹¬ì„ í‚¤ì›Œê°€ëŠ” ì‹œê¸°ì˜ˆìš”.",
  "The High Priestess_ë¯¸ë˜": "ëª…í˜¸ì˜ ì‚¬ì†Œí•œ í•œ ë§ˆë””ê°€ ë‚´ ë§ˆìŒì„ ê°€ì¥ ì˜ ì•Œì•„ì£¼ëŠ” ìœ„ë¡œê°€ ë˜ì–´ì¤„ ê±°ì˜ˆìš”.",
  "The Empress_ê³¼ê±°": "ëª…í˜¸ê°€ ìœ„ë²„ìŠ¤ì— ì˜¬ë ¤ì¤€ ë‹¤ì •í•œ ë§ í•œ ë§ˆë””ê°€ í•˜ë£¨ë¥¼ ë²„í‹°ê²Œ í•´ì¤¬ë˜ ê¸°ì–µì´ ìˆì–´ìš”.",
  "The Empress_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ì˜ ì¡´ì¬ë§Œìœ¼ë¡œë„ ì‚¶ì˜ ì‘ì€ ìˆœê°„ë“¤ì´ ë” ë”°ëœ»í•˜ê²Œ ëŠê»´ì ¸ìš”.",
  "The Empress_ë¯¸ë˜": "ëª…í˜¸ëŠ” ì•ìœ¼ë¡œë„ ë‹¹ì‹ ì—ê²Œ ì• ì • ì–´ë¦° ì‘ì›ê³¼ ìœ„ë¡œë¥¼ ì¤„ ì¡´ì¬ì¼ ê±°ì˜ˆìš”.",
  "The Emperor_ê³¼ê±°": "í˜ë“¤ì—ˆë˜ ë‚ , ëª…í˜¸ì˜ ë¬´ëŒ€ë‚˜ ì¸í„°ë·°ê°€ ë§ˆìŒì„ ë‹¨ë‹¨íˆ ë¶™ì¡ì•„ì¤¬ë˜ ì ì´ ìˆì–´ìš”.",
  "The Emperor_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ê°€ ì‚¶ì„ ëŒ€í•˜ëŠ” íƒœë„ë‚˜ ì² í•™ì—ì„œ ë‚˜ë„ ë‹¨ë‹¨í•´ì§€ëŠ” ë²•ì„ ë°°ìš°ëŠ” ì¤‘ì´ì—ìš”.",
  "The Emperor_ë¯¸ë˜": "ì•ìœ¼ë¡œ ë‚˜ëŠ” ì‘ì€ ìƒˆê°€ ë˜ì–´ í° ë‚˜ë¬´ì²˜ëŸ¼ í”ë“¤ë¦¼ ì—†ëŠ” ëª…í˜¸ ê³ì— ë‚¨ì„ ê±°ì˜ˆìš”.",
  "The Hierophant_ê³¼ê±°": "ëª…í˜¸ì˜ ë§ì—ì„œ ìƒˆë¡œìš´ ê°€ì¹˜ê´€ì˜ ì‹œì‘ì ì´ ë˜ì—ˆë˜ ìˆœê°„ì´ ìˆì—ˆì–´ìš”.",
  "The Hierophant_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ë¥¼ í†µí•´ ë‚´ê°€ ì–´ë–¤ ì‚¬ëŒì´ê³  ì‹¶ì€ì§€ë¥¼ ìì£¼ ë˜ìƒˆê²¨ë³´ê²Œ ë¼ìš”.",
  "The Hierophant_ë¯¸ë˜": "ëª…í˜¸ì˜ ì§„ì‹¬ ì–´ë¦° ì¡°ì–¸ê³¼ ë§ë“¤ì´ ì‚¶ì˜ ì§€ì¹¨ì´ ë  ê±°ì˜ˆìš”.",
  "The Lovers_ê³¼ê±°": "ëª…í˜¸ì—ê²Œ ë¹ ì¡Œë˜ ì…ë• ì´ˆê¸°ì— ëª¨ë“  ê²ƒì´ ë°˜ì§ì´ë˜ ìˆœê°„ì´ ë˜ë ·ì´ ë– ì˜¬ë¼ìš”.",
  "The Lovers_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ë¥¼ ì¢‹ì•„í•˜ëŠ” ë§ˆìŒì´ ì¼ìƒì˜ ì¤‘ì‹¬ì´ ëœ ì‹œê¸°ì˜ˆìš”.",
  "The Lovers_ë¯¸ë˜": "ì•ìœ¼ë¡œ ë‹¹ì‹ ì€ ëª…í˜¸ ë•ë¶„ì— ë‚˜ ìì‹ ì„ ë” ì‚¬ë‘í•˜ê²Œ ë  ê±°ì˜ˆìš”.",
  "The Chariot_ê³¼ê±°": "ëª…í˜¸ì˜ ì»´ë°±ì„ ì«“ì•„ë‹¤ë‹ˆë©° ê³„íší‘œë¥¼ ì§œê³  ì›€ì§ì˜€ë˜ ë•Œê°€ ìˆì—ˆì–´ìš”.",
  "The Chariot_í˜„ì¬": "ì§€ê¸ˆì€ ì–´ë–¤ ì¼ì •ë„ ë‘ë µì§€ ì•Šì„ ë§Œí¼ ëª…í˜¸ë¥¼ í–¥í•œ ë§ˆìŒì´ í™•ê³ í•´ìš”.",
  "The Chariot_ë¯¸ë˜": "ì•ìœ¼ë¡œ ëª…í˜¸ë¥¼ í–¥í•œ ì‘ì›ì´ ë‹¹ì‹ ì—ê²Œë„ ìë¶€ì‹¬ì´ ë  ê±°ì˜ˆìš”.",
  "Strength_ê³¼ê±°": "ëª…í˜¸ë¥¼ ì¢‹ì•„í•œ ì´í›„ ê°ì •ì„ ì˜¤ë˜ í’ˆìœ¼ë©° ì²œì²œíˆ ë§ˆìŒì„ ë‹¤ì¡ì•˜ë˜ ê¸°ì–µì´ ìˆì–´ìš”.",
  "Strength_í˜„ì¬": "ì§€ê¸ˆì€ í° í‘œí˜„ë³´ë‹¤ëŠ” ì¡°ìš©íˆ ëª…í˜¸ë¥¼ ì§€ì¼œë³´ë©° í˜ì„ ì–»ëŠ” ì‹œê¸°ì˜ˆìš”.",
  "Strength_ë¯¸ë˜": "ë‹¹ì‹ ì˜ ê¾¸ì¤€í•œ ì‘ì›ì´ ëª…í˜¸ì—ê²Œë„ ë”°ëœ»í•œ ì—ë„ˆì§€ë¡œ ì „í•´ì§ˆ ê±°ì˜ˆìš”.",
  "The Hermit_ê³¼ê±°": "ëª…í˜¸ë¥¼ ì¡°ìš©íˆ ì§€ì¼œë³´ë©° ë§ˆìŒì†ìœ¼ë¡œ í˜¼ìë§Œì˜ íŒ¬ í™œë™ì„ ì¦ê¸°ë˜ ì‹œì ˆì´ ìˆì—ˆì–´ìš”.",
  "The Hermit_í˜„ì¬": "ì§€ê¸ˆì€ í˜¼ìì„œë„ ì¡°ìš©íˆ ëª…í˜¸ì˜ ì½˜í…ì¸ ë¥¼ ì±™ê¸°ë©° ë‚˜ë§Œì˜ ì• ì •ì„ ìŒ“ëŠ” ì¤‘ì´ì—ìš”.",
  "The Hermit_ë¯¸ë˜": "ì•ìœ¼ë¡œë„ ëª…í˜¸ë¥¼ í–¥í•œ ë‹¹ì‹ ë§Œì˜ ì†ê¹Šì€ ì‘ì›ì´ ê³„ì†ë  ê±°ì˜ˆìš”.",
  "Wheel of Fortune_ê³¼ê±°": "ìš°ì—°íˆ ë³¸ ì˜ìƒ í•˜ë‚˜ë¡œ ëª…í˜¸ì—ê²Œ ì…ë•í•´ë²„ë ¸ë˜ ê·¸ ì°°ë‚˜ê°€ ê¸°ì–µë‚˜ìš”.",
  "Wheel of Fortune_í˜„ì¬": "ì§€ê¸ˆì€ ë§¤ ìˆœê°„ì´ ëª…í˜¸ ë•ë¶„ì— ì˜ˆìƒì¹˜ ëª»í•œ í–‰ë³µìœ¼ë¡œ ê°€ë“í•´ìš”.",
  "Wheel of Fortune_ë¯¸ë˜": "ì•ìœ¼ë¡œ ëª…í˜¸ì™€ì˜ ì¸ì—°ì´ ë˜ ë‹¤ë¥¸ ìš°ì—°ê³¼ ê¸°ì¨ì„ ë°ë ¤ì˜¬ ê±°ì˜ˆìš”.",
  "Justice_ê³¼ê±°": "íŒ¬ìœ¼ë¡œì„œ ëª…í˜¸ë¥¼ ì§€ì§€í•˜ë©´ì„œ ë‚´ ì„ íƒì´ ì˜³ì•˜ë‹¤ê³  ëŠê¼ˆë˜ ìˆœê°„ì´ ìˆì—ˆì–´ìš”.",
  "Justice_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ë¥¼ ë°”ë¼ë³´ë©° ë‚˜ì˜ ê°€ì¹˜ì™€ ê¸°ì¤€ì„ ë” ë¶„ëª…íˆ ì„¸ì›Œê°€ëŠ” ì¤‘ì´ì—ìš”.",
  "Justice_ë¯¸ë˜": "ì•ìœ¼ë¡œë„ ëª…í˜¸ì™€ í•¨ê»˜í•œ ì‹œê°„ë“¤ì´ ë‚´ ì„ íƒì˜ í™•ì‹ ì´ ë˜ì–´ì¤„ ê±°ì˜ˆìš”.",
  "The Hanged Man_ê³¼ê±°": "ëª…í˜¸ì˜ í™œë™ì„ ê¸°ë‹¤ë¦¬ë©° ì ì‹œ ë©ˆì¶° ìˆì—ˆë˜ ì‹œê°„ì´ ìˆì—ˆì–´ìš”.",
  "The Hanged Man_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ì˜ ë§ì´ë‚˜ í–‰ë™ì„ ì²œì²œíˆ ê³±ì”¹ìœ¼ë©° ì˜ë¯¸ë¥¼ ë˜ìƒˆê¸°ëŠ” ì‹œê¸°ì˜ˆìš”.",
  "The Hanged Man_ë¯¸ë˜": "ì•ìœ¼ë¡œëŠ” ì¸ë‚´ê°€ í•„ìš”í•œ ìˆœê°„ì—ë„ ëª…í˜¸ê°€ ë‹¹ì‹ ì˜ ìœ„ì•ˆì´ ë˜ì–´ì¤„ ê±°ì˜ˆìš”.",
  "Death_ê³¼ê±°": "ëª…í˜¸ì˜ ê³µë°±ê¸°ë‚˜ ë³€í™” ì†ì—ì„œ ì•„ì‰¬ì›€ì„ ëŠë¼ë©° ì ì‘í•´ê°”ë˜ ì‹œì ˆì´ ìˆì–´ìš”.",
  "Death_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ë¥¼ í–¥í•œ ê°ì •ì´ ìƒˆë¡œìš´ í˜•íƒœë¡œ ìë¦¬ ì¡ëŠ” ì‹œê¸°ì˜ˆìš”.",
  "Death_ë¯¸ë˜": "ì•ìœ¼ë¡œ ëª…í˜¸ì™€ì˜ ê´€ê³„ë„ ìƒˆë¡­ê²Œ ë‹¤ì‹œ ì‹œì‘ë  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.",
  "Temperance_ê³¼ê±°": "ë•ì§ˆê³¼ ì¼ìƒ ì‚¬ì´ì—ì„œ ê· í˜•ì„ ë§ì¶”ë ¤ ë…¸ë ¥í–ˆë˜ ì‹œì ˆì´ ìˆì–´ìš”.",
  "Temperance_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ë¥¼ ì¢‹ì•„í•˜ëŠ” ê°ì •ì„ ë¬´ë¦¬í•˜ì§€ ì•Šê³  ì˜ ì¡°ìœ¨í•˜ê³  ìˆì–´ìš”.",
  "Temperance_ë¯¸ë˜": "ì•ìœ¼ë¡œ ëª…í˜¸ì™€ì˜ ì‹œê°„ì€ ì¡°í™”ë¡œìš´ ë°©ì‹ìœ¼ë¡œ ë‹¹ì‹ ì˜ ì¼ìƒì— ë…¹ì•„ë“¤ ê±°ì˜ˆìš”.",
  "The Devil_ê³¼ê±°": "ëª…í˜¸ì—ê²Œ ë„ˆë¬´ ë¹ ì ¸ì„œ ë‹¤ë¥¸ ê±¸ ë†“ì³¤ë˜ ê¸°ì–µì´ ë– ì˜¤ë¥´ë„¤ìš”.",
  "The Devil_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ë¥¼ í–¥í•œ ì§‘ì°©ê³¼ ì‚¬ë‘ ì‚¬ì´ì—ì„œ ê· í˜•ì„ ê³ ë¯¼ ì¤‘ì´ì—ìš”.",
  "The Devil_ë¯¸ë˜": "ì•ìœ¼ë¡œë„ ëª…í˜¸ë¥¼ í–¥í•œ ë§ˆìŒì„ ìŠ¤ìŠ¤ë¡œ ê±´ê°•í•˜ê²Œ ì¡°ì ˆí•˜ëŠ” ê²Œ ì¤‘ìš”í•´ìš”.",
  "The Tower_ê³¼ê±°": "ëª…í˜¸ì˜ ê°‘ì‘ìŠ¤ëŸ° ì†Œì‹ì— ë©˜ë¶•ì„ ê²ªì—ˆë˜ ìˆœê°„ì´ ìˆì—ˆì–´ìš”.",
  "The Tower_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ì˜ ë³€í™”ì— ë†€ë¼ê¸°ë„ í•˜ì§€ë§Œ ê·¸ ì•ˆì—ì„œ ë³¸ì§ˆì„ ë³´ë ¤ í•´ìš”.",
  "The Tower_ë¯¸ë˜": "ì•ìœ¼ë¡œ ì˜ˆìƒì¹˜ ëª»í•œ ì¼ë“¤ì´ ìˆì–´ë„ ëª…í˜¸ì™€ì˜ ì‹ ë¢°ëŠ” ë” ë‹¨ë‹¨í•´ì§ˆ ê±°ì˜ˆìš”.",
  "The Star_ê³¼ê±°": "ëª…í˜¸ì˜ ì›ƒìŒì´ë‚˜ ë§ í•œë§ˆë””ì— í° ìœ„ë¡œë¥¼ ë°›ì•˜ë˜ ê¸°ì–µì´ ìˆì–´ìš”.",
  "The Star_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ê°€ ë‚˜ì—ê²Œ í¬ë§ê³¼ ì¹˜ìœ ì˜ ìƒì§•ì´ ë˜ê³  ìˆì–´ìš”.",
  "The Star_ë¯¸ë˜": "ì•ìœ¼ë¡œ ëª…í˜¸ëŠ” ë‹¹ì‹ ì˜ ì–´ë‘ìš´ ë‚ ì—ë„ ë¹›ì´ ë˜ì–´ì¤„ ê±°ì˜ˆìš”.",
  "The Moon_ê³¼ê±°": "ëª…í˜¸ë¥¼ ì¢‹ì•„í•˜ë©´ì„œ ê°ì •ì˜ í˜¼ë€ì´ë‚˜ ì˜¤í•´ë¡œ ë°©í™©í–ˆë˜ ì‹œì ˆì´ ìˆì—ˆì–´ìš”.",
  "The Moon_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ì— ëŒ€í•œ ê°ì •ì´ ë³µì¡í•˜ì§€ë§Œ ì ì  ë‚´ ì¤‘ì‹¬ì„ ì°¾ì•„ê°€ê³  ìˆì–´ìš”.",
  "The Moon_ë¯¸ë˜": "ì•ìœ¼ë¡œë„ ê°ì •ì˜ ê¸°ë³µì€ ìˆê² ì§€ë§Œ ëª…í˜¸ì™€ì˜ ì‹ ë¢°ê°€ ê¸¸ì„ ë°í˜€ì¤„ ê±°ì˜ˆìš”.",
  "The Sun_ê³¼ê±°": "ëª…í˜¸ ë•ë¶„ì— ëª¨ë“  ê²Œ ë°˜ì§ì´ë˜ ì‹œì ˆì´ ìˆì—ˆì–´ìš”.",
  "The Sun_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ì˜ ì¡´ì¬ë§Œìœ¼ë¡œë„ ë§¤ì¼ì´ ê°ì‚¬í•˜ê³  í–‰ë³µí•´ìš”.",
  "The Sun_ë¯¸ë˜": "ì•ìœ¼ë¡œ ë‹¹ì‹ ì€ ëª…í˜¸ì™€ì˜ ì¶”ì–µì´ ê°€ì¥ ì†Œì¤‘í•œ ë¹›ìœ¼ë¡œ ë‚¨ì„ ê±°ì˜ˆìš”.",
  "Judgement_ê³¼ê±°": "ëª…í˜¸ë¥¼ í–¥í•œ ê°ì •ì„ ì†”ì§í•˜ê²Œ ëŒì•„ë´¤ë˜ ê³„ê¸°ê°€ ìˆì—ˆì–´ìš”.",
  "Judgement_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ë¥¼ ì¢‹ì•„í•˜ëŠ” ë‚´ ëª¨ìŠµì— ëŒ€í•´ ìë¶€ì‹¬ì„ ëŠë¼ëŠ” ì‹œê¸°ì˜ˆìš”.",
  "Judgement_ë¯¸ë˜": "ì•ìœ¼ë¡œ ë‹¹ì‹ ì€ ëª…í˜¸ ë•ë¶„ì— ë” ë‹¨ë‹¨í•˜ê³  ì„±ìˆ™í•œ íŒ¬ì´ ë  ê±°ì˜ˆìš”.",
  "The World_ê³¼ê±°": "ëª…í˜¸ì™€ í•¨ê»˜í•œ ì´ë²¤íŠ¸ë‚˜ íŒ¬ì½˜ì´ ì™„ë²½í–ˆë˜ ë§ˆë¬´ë¦¬ë¡œ ê¸°ì–µë¼ìš”.",
  "The World_í˜„ì¬": "ì§€ê¸ˆì€ ëª…í˜¸ì™€ì˜ ì¸ì—°ì´ í•˜ë‚˜ì˜ ì‚¬ì´í´ì„ ì´ë£¨ë©° ì•ˆì •ê°ì„ ì¤˜ìš”.",
  "The World_ë¯¸ë˜": "ì•ìœ¼ë¡œ ëª…í˜¸ì™€ì˜ ê´€ê³„ëŠ” ìƒˆë¡œìš´ ì‹œì‘ê³¼ ë” í° ì™„ì„±ìœ¼ë¡œ ì´ì–´ì§ˆ ê±°ì˜ˆìš”."
};

    const basicMeanings = {
      "The Fool": "ìƒˆë¡œìš´ ì‹œì‘, ììœ ë¡œìš´ ì—ë„ˆì§€",
      "The Magician": "ì˜ì§€ì™€ ì°½ì¡°ë ¥, ìì› í™œìš©",
      "The High Priestess": "ì§ê´€, ë‚´ë©´ì˜ ì§€í˜œ",
      "The Empress": "í’ìš”, ì‚¬ë‘, ì°½ì¡°ì„±",
      "The Emperor": "ê¶Œìœ„, ì•ˆì •, ì±…ì„",
      "The Hierophant": "ì „í†µ, ì¡°ì–¸, ì˜ì  ê°€ë¥´ì¹¨",
      "The Lovers": "ì‚¬ë‘, ì„ íƒ, ê´€ê³„ì˜ ì¡°í™”",
      "The Chariot": "ì „ì§„, ì˜ì§€ë ¥, ìŠ¹ë¦¬",
      "Strength": "ìš©ê¸°, ì¸ë‚´, ë¶€ë“œëŸ¬ìš´ í˜",
      "The Hermit": "ê³ ë…, ì„±ì°°, ë‚´ë©´ì˜ ê¸¸",
      "Wheel of Fortune": "ìš´ëª…ì˜ ë³€í™”, ê¸°íšŒ",
      "Justice": "ê³µì •, ê· í˜•, ì±…ì„",
      "The Hanged Man": "í¬ìƒ, ê´€ì  ë³€í™”",
      "Death": "ë, ë³€í™”, ìƒˆë¡œìš´ ì‹œì‘",
      "Temperance": "ì¡°í™”, ì ˆì œ, ê· í˜•",
      "The Devil": "ì†ë°•, ìœ í˜¹",
      "The Tower": "íŒŒê´´, ì¶©ê²©, ì¬ì •ë¹„",
      "The Star": "í¬ë§, ì˜ê°, íšŒë³µ",
      "The Moon": "í˜¼ë€, ì§ê°, ê°ì •ì˜ ê¹Šì´",
      "The Sun": "ì„±ê³µ, ê¸°ì¨, ëª…í™•ì„±",
      "Judgement": "ìê°, ë¶€í™œ, í‰ê°€",
      "The World": "ì™„ì„±, ì„±ì·¨"
    };

    let selectedCards = [];

    function renderCards() {
      const container = document.getElementById("card-container");
      container.innerHTML = "";
      selectedCards = [];
      document.getElementById("overlay").style.display = "none";
      const shuffled = [...tarotDeck].sort(() => 0.5 - Math.random());
      shuffled.forEach(card => {
        const div = document.createElement("div");
        div.className = "result-card";
        div.textContent = "?";
        div.onclick = () => selectCard(div, card);
        container.appendChild(div);
      });
    }

    function selectCard(div, cardName) {
      if (selectedCards.length >= 3 || div.classList.contains("revealed")) return;
      div.classList.add("revealed");
      div.textContent = cardName;
      selectedCards.push(cardName);
      if (selectedCards.length === 3) showPopup();
    }

    function showPopup() {
      const positions = ["ê³¼ê±°", "í˜„ì¬", "ë¯¸ë˜"];
      const contentDiv = document.getElementById("popup-content");
      contentDiv.innerHTML = "";

      const wrapper = document.createElement("div");
      wrapper.className = "popup-entry-wrapper";

      selectedCards.forEach((card, index) => {
        const pos = positions[index];
        const contextualKey = `${card}_${pos}`;
        const meaning = contextualInterpretations[contextualKey] || basicMeanings[card];

        const entry = document.createElement("div");
        entry.className = "popup-entry";

        const cardBox = document.createElement("div");
        cardBox.className = "result-card";
        cardBox.textContent = card;
        cardBox.onclick = () => saveCardAsImage(cardBox);

        const text = document.createElement("p");
        text.className = "popup-card-text";
        text.innerHTML = `<strong>${pos}</strong><br>(${card})<br>${meaning}`;

        entry.appendChild(cardBox);
        entry.appendChild(text);
        wrapper.appendChild(entry);
      });

      contentDiv.appendChild(wrapper);

      const summary = document.createElement("div");
      summary.className = "summary-text";
      summary.textContent = generateSummary(selectedCards);
      contentDiv.appendChild(summary);

      document.getElementById("overlay").style.display = "flex";
    }

    function generateSummary(cards) {
      return `${cards.join(", ")}ëŠ” ë‹¹ì‹ ì´ ì›í•˜ëŠ” ë°”ë¥¼ ì´ë¤„ì¤„ ìˆ˜ ìˆëŠ” ë“±ë¶ˆì´ ë ê±°ì—ìš”.`;
    }

    function resetGame() {
      renderCards();
    }

    function closePopup() {
      document.getElementById("overlay").style.display = "none";
    }

    function saveCardAsImage(element) {
      html2canvas(element).then(canvas => {
        const link = document.createElement("a");
        link.download = "tarot-card.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    }

    renderCards();
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>
